   0  59  38  33  30  17   8  63
  37  34  31  60   9  62  29  16
  58   1  36  39  32  27  18   7
  35  48  41  26  61  10  15  28
  42  57   2  49  40  23   6  19
  47  50  45  54  25  20  11  14
  56  43  52   3  22  13  24   5
  51  46  55  44  53   4  21  12

; KnightsTour_board offset 0
; KnightsTour_moveX offset 256
; KnightsTour_moveY offset 288
KnightsTour_Setup: code offset: 0
	; i offset 4
	; j offset 8
0	SUB SP, SP, #12
1	STW LR, SP, #0
2	MOV R0, #0
3	STW R0, SP, #4
4	B 31
5	MOV R0, #0
6	STW R0, SP, #8
7	B 25
8	LDW R0, SP, #4
9	MOV R1, #8
10	CMP R1, R0
11	BHI -2
12	MUL R0, R0, #32
13	ADD R0, GB, R0
14	LDW R1, SP, #8
15	MOV R2, #8
16	CMP R2, R1
17	BHI -2
18	MUL R1, R1, #4
19	ADD R0, R0, R1
20	MOV R1, #-1
21	STW R1, R0, #0
22	LDW R0, SP, #8
23	ADD R0, R0, #1
24	STW R0, SP, #8
25	LDW R0, SP, #8
26	CMP R0, #7
27	BLE 8
28	LDW R0, SP, #4
29	ADD R0, R0, #1
30	STW R0, SP, #4
31	LDW R0, SP, #4
32	CMP R0, #7
33	BLE 5
34	MOV R0, #2
35	STW R0, GB, #256
36	MOV R0, #1
37	STW R0, GB, #260
38	MOV R0, #-1
39	STW R0, GB, #264
40	MOV R0, #-2
41	STW R0, GB, #268
42	MOV R0, #-2
43	STW R0, GB, #272
44	MOV R0, #-1
45	STW R0, GB, #276
46	MOV R0, #1
47	STW R0, GB, #280
48	MOV R0, #2
49	STW R0, GB, #284
50	MOV R0, #1
51	STW R0, GB, #288
52	MOV R0, #2
53	STW R0, GB, #292
54	MOV R0, #2
55	STW R0, GB, #296
56	MOV R0, #1
57	STW R0, GB, #300
58	MOV R0, #-1
59	STW R0, GB, #304
60	MOV R0, #-2
61	STW R0, GB, #308
62	MOV R0, #-2
63	STW R0, GB, #312
64	MOV R0, #-1
65	STW R0, GB, #316
66	LDW LR, SP, #0
67	ADD SP, SP, #12
68	B LR
KnightsTour_Solve: code offset: 69
	; curX offset 4
	; curY offset 8
	; curMove offset 12
	; done offset 16
	; move offset 20
	; newX offset 24
	; newY offset 28
69	SUB SP, SP, #32
70	STW LR, SP, #0
71	STW R0, SP, #4
72	STW R1, SP, #8
73	STW R2, SP, #12
74	LDW R0, SP, #12
75	CMP R0, #64
76	BNE 80
77	MOV R0, #1
78	STW R0, SP, #16
79	B 179
80	MOV R0, #0
81	STW R0, SP, #16
82	MOV R0, #0
83	STW R0, SP, #20
84	B 173
85	LDW R0, SP, #4
86	LDW R1, SP, #20
87	MOV R2, #8
88	CMP R2, R1
89	BHI -2
90	MUL R1, R1, #4
91	ADD R1, GB, R1
92	LDW R1, R1, #256
93	ADD R0, R0, R1
94	STW R0, SP, #24
95	LDW R0, SP, #8
96	LDW R1, SP, #20
97	MOV R2, #8
98	CMP R2, R1
99	BHI -2
100	MUL R1, R1, #4
101	ADD R1, GB, R1
102	LDW R1, R1, #288
103	ADD R0, R0, R1
104	STW R0, SP, #28
105	LDW R0, SP, #24
106	CMP R0, #0
107	BLT 170
108	LDW R0, SP, #24
109	CMP R0, #8
110	BGE 170
111	LDW R0, SP, #28
112	CMP R0, #0
113	BLT 170
114	LDW R0, SP, #28
115	CMP R0, #8
116	BGE 170
117	LDW R0, SP, #24
118	MOV R1, #8
119	CMP R1, R0
120	BHI -2
121	MUL R0, R0, #32
122	ADD R0, GB, R0
123	LDW R1, SP, #28
124	MOV R2, #8
125	CMP R2, R1
126	BHI -2
127	MUL R1, R1, #4
128	ADD R0, R0, R1
129	LDW R0, R0, #0
130	CMP R0, #-1
131	BNE 170
132	LDW R0, SP, #24
133	MOV R1, #8
134	CMP R1, R0
135	BHI -2
136	MUL R0, R0, #32
137	ADD R0, GB, R0
138	LDW R1, SP, #28
139	MOV R2, #8
140	CMP R2, R1
141	BHI -2
142	MUL R1, R1, #4
143	ADD R0, R0, R1
144	LDW R1, SP, #12
145	STW R1, R0, #0
146	LDW R0, SP, #24
147	LDW R1, SP, #28
148	LDW R2, SP, #12
149	ADD R2, R2, #1
150	BL 69 (KnightsTour_Solve)
151	CMP R0, #0
152	BEQ 156
153	MOV R0, #1
154	STW R0, SP, #16
155	B 170
156	LDW R0, SP, #24
157	MOV R1, #8
158	CMP R1, R0
159	BHI -2
160	MUL R0, R0, #32
161	ADD R0, GB, R0
162	LDW R1, SP, #28
163	MOV R2, #8
164	CMP R2, R1
165	BHI -2
166	MUL R1, R1, #4
167	ADD R0, R0, R1
168	MOV R1, #-1
169	STW R1, R0, #0
170	LDW R0, SP, #20
171	ADD R0, R0, #1
172	STW R0, SP, #20
173	LDW R0, SP, #16
174	CMP R0, #0
175	BNE 179
176	LDW R0, SP, #20
177	CMP R0, #8
178	BLT 85
179	LDW R0, SP, #16
180	LDW LR, SP, #0
181	ADD SP, SP, #32
182	B LR
KnightsTour_PrintBoard: code offset: 183
	; i offset 4
	; j offset 8
183	SUB SP, SP, #12
184	STW LR, SP, #0
185	MOV R0, #0
186	STW R0, SP, #4
187	B 217
188	MOV R0, #0
189	STW R0, SP, #8
190	B 209
191	LDW R0, SP, #4
192	MOV R1, #8
193	CMP R1, R0
194	BHI -2
195	MUL R0, R0, #32
196	ADD R0, GB, R0
197	LDW R1, SP, #8
198	MOV R2, #8
199	CMP R2, R1
200	BHI -2
201	MUL R1, R1, #4
202	ADD R0, R0, R1
203	LDW R0, R0, #0
204	MOV R1, #0
205	STW R0, R1, #-1
206	LDW R0, SP, #8
207	ADD R0, R0, #1
208	STW R0, SP, #8
209	LDW R0, SP, #8
210	CMP R0, #7
211	BLE 191
212	MOV R0, #0
213	STW R0, R0, #-3
214	LDW R0, SP, #4
215	ADD R0, R0, #1
216	STW R0, SP, #4
217	LDW R0, SP, #4
218	CMP R0, #7
219	BLE 188
220	LDW LR, SP, #0
221	ADD SP, SP, #12
222	B LR
KnightsTour__module_init_: code offset: 223
223	SUB SP, SP, #4
224	STW LR, SP, #0
225	BL 0 (KnightsTour_Setup)
226	MOV R0, #0
227	STW R0, GB, #0
228	MOV R0, #0
229	MOV R1, #0
230	MOV R2, #1
231	BL 69 (KnightsTour_Solve)
232	BL 183 (KnightsTour_PrintBoard)
233	LDW LR, SP, #0
234	ADD SP, SP, #4
235	B LR
__start__: 236
236	BL 223 (KnightsTour__module_init_)
237	HALT
